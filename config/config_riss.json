{
	"name": "riss",
	"seed": {
		"url": "http://www.riss.kr/search/Search.do?detailSearch=&viewYn=OP",
		"type": "GET",
		"data": [
			{"key": "query", "value": "<%keyword%>", "description": "다중키워드 검색시  | 문자로 or 기능을 수행함 "},
			{"key": "colName", "value": "bib_t", "description" : "카테고리 : re_a_kor 국내학술지, bib_t 학위논문"}
		]
	},
	"ignore_robots": true,
	"crawling_max_depth": -1,
	"crawling_type": "SCENARIO_DYNAMIC",
	"crawling_delay": 1,
	"crawling_max_count": -1,
	"contents_save_type": "DB",
	"save_html": false,
	"output_file_path": "",
	"charset": "UTF-8",
	"selenium_driver_name": "chrome",
	"selenium_headless": false,
	"scenario": [
		{
			"depth": 0,
			"action": [
				{
					"type": "javascript",
					"selector": "#lnb02_g2 > a",
					"value" : "var start=<%from_date%>, end=<%to_date%>; start = start.toString().substr(0,4); end= end.toString().substr(0,4); for( i = start; i <= end ; i++){ e = document.querySelector(\"input[name='c_use_pyear'][value='\"+i+\"']\"); if (e) e.checked = true; }",
					"description": "날짜를 직접 수정하고 싶기 때문에 자바스크립트로 구현함"
				},
				{
					"type": "click",
					"selector": "#lnb > li:nth-child(3) > span > a > img",
					"target_depth": 1
				},
				{
					"type": "click",
					"selector": "#lnb > li.lnb01 > ul > li:nth-child(3) > a"
				},
				{
					"type": "javascript",
					"selector": "#lnb02_g2 > a",
					"value" : "var start=<%from_date%>, end=<%to_date%>; start = start.toString().substr(0,4); end= end.toString().substr(0,4); for( i = start; i <= end ; i++){ e = document.querySelector(\"input[name='c_use_pyear'][value='\"+i+\"']\"); if (e) e.checked = true; }",
					"description": "날짜를 직접 수정하고 싶기 때문에 자바스크립트로 구현함"
				},
				{
					"type": "click",
					"selector": "#lnb > li:nth-child(3) > span > a > img",
					"target_depth": 1
				}
			]
		},
		{
			"depth": 1,
			"action": [
				{
					"type": "click",
					"selector": "div.cont > p.txt > a",
					"target_depth": 2
				},
				{
					"type": "click",
					"selector": "#level4_mainContent > form > div.tabWarp.page > div.tabCont > div > div.passing > span.num > strong + a",
					"target_depth": 1
				},
				{
					"type": "click",
					"selector": "a img[alt=\"다음\"]",
					"target_depth": 1
				}
			]
		},
		{
			"depth": 2,
			"action": [
				{
					"type": "javascript",
					"selector": "#level4_mainContent",
					"value": "var list = document.getElementsByTagName(\"strong\"); for(var i = 0 ; i < list.length ; i++){ list[i].setAttribute(\"attrText\", list[i].innerText); }",
					"description": "태그에 id 또는 class와 같은 고유 식별자가 없어서 text값을 고유 식별자로 활용하기 위하여 태그 속성으로 넣음"
				},
				{
					"type": "parse_contents",
					"selector": "#level4_mainContent",
					"contents_depth": 0
				},
				{
					"type": "backward_window"
				}
			]
		}
	],
	"collect_recode": [
		{
			"depth": 0,
			"name": "riss",
			"recode_selector": "#level4_mainContent",
			"inser_or_update" : true,
			"column": [
				{
					"type": "URL",
					"data_type": "varchar(50)",
					"data_name": "id",
					"key": true,
					"regex_filter": ["(?<=control_no\\=)[A-Za-z0-9_]+(?=\\&)*"]
				},
				{
					"type": "text",
					"data_type": "varchar(50)",
					"data_name": "search_keyword",
					"value": "<%keyword%>"
				},
				{
					"type": "text",
					"data_type": "varchar(50)",
					"data_name": "source_site",
					"value": "RISS"
				},
				{
					"data_type": "text",
					"data_name": "title",
					"allow_null": false,
					"element": [
						{
							"from_root": true,
							"selector": "#level4_mainContent > div > div.vTop02 > p.tit",
							"type": "text"
						}
					]
				},
				{
					"type": "text",
					"data_type": "varchar(50)",
					"data_name": "category",
					"value": "단행본"
				},
				{
					"data_type": "varchar(200)",
					"data_name": "reg_date",
					"allow_null": false,
					"element": [
						{
							"from_root": true,
							"selector": "strong[attrtext='발행년도'] + p",
							"type": "text"
						},
						{
							"from_root": true,
							"selector": "strong[attrtext='출판년'] + p",
							"type": "text"
						}
					]
				},
				{
					"data_type": "text",
					"data_name": "contents",
					"allow_null": true,
					"element": [
						{
							"from_root": true,
							"selector": "strong[attrtext='국문 초록 (Abstract)'] + div.tt > ul > li:nth-child(2)",
							"type": "text"
						}
					]
				},
				{
					"data_type": "text",
					"data_name": "keyword",
					"allow_null": true,
					"element": [
						{
							"from_root": true,
							"selector": "strong[attrtext='주제어'] +p",
							"type": "text"
						}
					]
				}
			]
		}
	]
}